<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">

<title>stm32w_flasher: stm32w_flasher.exe 2.1.0</title>

<LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">

</head><body>

<table border="0" cellspacing="0" cellpadding="0"  width=100%>

<tr>

<td><img src="ST_Logo.gif"></td>

</table>
<!-- Generated by Doxygen 1.6.1 -->
<div class="contents">
<h1>stm32w_flasher.exe 2.1.0</h1><h3>2.1.0 </h3><p>A utility allowing to program user flash for STM32W108 family device. Complete list of features as follow: </p>
<ul>
<li>Program and verify user flash </li>
<li>Support raw binary (.bin) and Motorola S-rec (.s37) flash image format </li>
<li>Support IAR Jlink JTAG interface </li>
<li>Support USB interface for all the boards in STM32W kits </li>
<li>Support RF interface (experimental) </li>
<li>Print information about the STM32W108 silicon </li>
<li>Read Customer Information Block content </li>
<li>Allow programming of Customer Information Block </li>
<li>Allow manipulation of option bytes to enable/disable readout protection and write protections</li>
</ul>
<h2><a class="anchor" id="usage">
Usage</a></h2>
<p>Usage: stm32w_flasher.exe [option...] [filename{.s37|.bin}]</p>
<h2><a class="anchor" id="BOL">
Basic options list</a></h2>
<ul>
<li><code> --version </code> show program's version number and exit</li>
</ul>
<ul>
<li><code> -h, --help </code> show this help message and exit</li>
</ul>
<ul>
<li><code> -i INTERFACE, --interface=INTERFACE </code> &lt;rs232 | jlink | rf &gt; specify flasher interface (default jlink)</li>
</ul>
<ul>
<li><code> -f, --flash-image </code> program user flash</li>
</ul>
<ul>
<li><code> -v, --verify </code> verify flash content against file</li>
</ul>
<ul>
<li><code> -p PORT, --port=PORT </code> &lt;COMnn | auto&gt;: specify rs232 port or auto mode (only relevant if interface selected is rs232 or rf)</li>
</ul>
<ul>
<li><code> -d, --device-info </code> print information about the STM32W device</li>
</ul>
<ul>
<li><code> -r, --reset </code> Reset device</li>
</ul>
<h2><a class="anchor" id="AOL">
Advanced options list</a></h2>
<ul>
<li><code> -a ADDRESS, --address=ADDRESS </code> 0xHHHHHHHH specify baseaddress (only relevat for .bin images)</li>
</ul>
<ul>
<li><code> -s, --start </code> Start application</li>
</ul>
<ul>
<li><code> -m, --masserase </code> Erase user flash (masserase)</li>
</ul>
<ul>
<li><code> -b, --bootloader-mode </code> Device is already in bootloader mode.(Only relevant for rs232 interface)</li>
</ul>
<ul>
<li><code> -e EUI64, --eui64=EUI64 </code> 0xHHHHHHHHHHHHHHHH specify EUI64 (only relevat for rf interface)</li>
</ul>
<ul>
<li><code> --enable-readout-protection=ENABLE_READOUT_PROTECTION </code> &lt;0|1&gt; Disable or enable readout protection</li>
</ul>
<ul>
<li><code> --set-write-protection=SET_WRITE_PROTECTION </code> 0xHHHHHHHH Set write protection to hex value (each bit set to zero is protecting 4K)</li>
</ul>
<ul>
<li><code> --cib-dump </code> Dump the content of Customer Information Block to stdout</li>
</ul>
<ul>
<li><code> --cib-program=CIB_PROGRAM </code> &lt;file&gt; Program Customer Information Block with value from file (format of the file is the same as the output of <code>--cib-dump</code> </li>
</ul>
<h2><a class="anchor" id="BE">
Basic examples</a></h2>
<h3><a class="anchor" id="S1">
Program user flash with IAR Jlink interface</a></h3>
<div class="fragment"><pre class="fragment">  stm32w_flasher.exe file.s37
</pre></div> <h3><a class="anchor" id="S2">
Program and verify user flash with IAR Jlink interface</a></h3>
<div class="fragment"><pre class="fragment">  stm32w_flasher.exe -f -v file.s37
</pre></div> <h3><a class="anchor" id="S3">
Program user flash and reset device with IAR Jlink interface</a></h3>
<div class="fragment"><pre class="fragment">  stm32w_flasher.exe -f -r file.s37
</pre></div> <h3><a class="anchor" id="S4">
Program user flash and reset device with rs232 interface</a></h3>
<div class="fragment"><pre class="fragment">  stm32w_flasher.exe -f -r -p auto file.s37
</pre></div> <h3><a class="anchor" id="S5">
Print device information with rs232 interface</a></h3>
<div class="fragment"><pre class="fragment">  stm32w_flasher.exe -p auto -d
</pre></div> <h2><a class="anchor" id="AdvEx">
Advanced examples</a></h2>
<h3><a class="anchor" id="S6">
Mass erase user flash with IAR Jlink interface</a></h3>
<div class="fragment"><pre class="fragment">  stm32w_flasher.exe -m
</pre></div> <h3><a class="anchor" id="S7">
Start OTA bootloader on an STM32W108CC or STM32W108CZ device</a></h3>
<p>This example show how to start an application that is not located at the CortexM3 boot address. In particular it will start the OTA bootloader code on 192K and 256K flash parts. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>This particular command run code in the FIB and it is supported only by jlink interface</dd></dl>
<div class="fragment"><pre class="fragment">  stm32w_flasher.exe -a 0x08041800 -s
</pre></div> <h3><a class="anchor" id="S8">
Enable readout protection</a></h3>
<p>This example show how to enable readout protection.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>After the readout protection is enabled, it is not possible to program the user flash until the readout protection is disabled. </dd>
<dd>
You need to perform a power on reset or a pin reset before the readout protection is activated </dd>
<dd>
Disabling readout protection will clear the CIB content which may contain valuable information.</dd></dl>
<div class="fragment"><pre class="fragment">  stm32w_flasher.exe -p auto --enable-readout-protection=1
</pre></div> <h3><a class="anchor" id="S9">
Disable readout protection</a></h3>
<p>This example show how to disable readout protection. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>You need to perform a power on reset or a pin reset before the readout protection is disabled </dd>
<dd>
Disabling readout protection will clear the CIB content which may contain valuable information.</dd></dl>
<div class="fragment"><pre class="fragment">  stm32w_flasher.exe -p auto --enable-readout-protection=0
</pre></div> <h3><a class="anchor" id="S10">
Enable write protection</a></h3>
<p>This example show how to enable write protection in the first 16K of user flash. </p>
<div class="fragment"><pre class="fragment">  stm32w_flasher.exe -p auto --set-write-protection=0xFFFFFFF0
</pre></div> <h3><a class="anchor" id="S11">
Disable write protection</a></h3>
<p>This example show how to disable write protection in the user flash </p>
<div class="fragment"><pre class="fragment">  stm32w_flasher.exe -p auto --set-write-protection=0xFFFFFFFF
</pre></div> <h3><a class="anchor" id="S12">
Print Customer Information Block content</a></h3>
<p>This example show how to print the customer information block content. </p>
<div class="fragment"><pre class="fragment">  stm32w_flasher.exe -p auto --cib-dump
</pre></div> <h3><a class="anchor" id="S13">
Programming Customer Information Block content</a></h3>
<p>This example show how to write a custom EUI64 to the CIB. The following steps are required:</p>
<ol type="1">
<li>Prepare a file called <code>cib.txt</code> whose content is a single line as follow: <div class="fragment"><pre class="fragment">  TOKEN_MFG_CUSTOM_EUI_64         : 0xAABBCCDDEEFF0011
</pre></div></li>
<li>Run the following command <div class="fragment"><pre class="fragment">  stm32w_flasher.exe -p auto --cib-program=cib.txt
</pre></div></li>
</ol>
<dl class="note"><dt><b>Note:</b></dt><dd>to remove the custom EUI64 you need to repeat the above steps with <code>TOKEN_MFG_CUSTOM_EUI_64</code> set to <code>0xFFFFFFFFFFFFFFFF</code> </dd></dl>
<h3><a class="anchor" id="S14">
Using the RF interface</a></h3>
<p>This example show how to use stm32w_flasher to access a node via RF and read device information. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>The rf interface is able to perform all the operations described in the previous subsection.</dd></dl>
<p>To run this this example two nodes are required:</p>
<ol type="1">
<li>A <code>bypass</code> node phisically connected to the PC via USB. This node must be an STM32W108CC (i.e. a node with 16K RAM)</li>
<li>A <code>target</code> node whose EUI64 is known in advance and it is in the radio range of the <code>bypass</code> node. For the sake of this example, the <code>target</code> node needs to be an STM32W108CC and it needs to be connected via IAR Jlink to the PC.</li>
</ol>
<p>The following steps are required:</p>
<ol type="1">
<li>On <code>target</code> node, run the following command: <div class="fragment"><pre class="fragment">  stm32w_flasher.exe -d
</pre></div> and take note of the EUI64 displayed. <br/>
</li>
<li>On <code>target</code> node, run the following command (this will activate the RF bootloader in system memory): <div class="fragment"><pre class="fragment">  stm32w_flasher.exe -a 0x08041800 -s
</pre></div></li>
<li>On <code>bypass</code> node, run the following command: <div class="fragment"><pre class="fragment">  stm32w_flasher.exe -i rf -p COMxx -e 0xHHHHHHHHHHHHHHHH -d
</pre></div> where 0xHHHHHHHHHHHHHHHH is the EUI64 of the <code>target</code> node.</li>
</ol>
<p>This command will print the device information related to the <code>target</code> node. </p>
</div>
<hr size="1">

<table border="0" cellspacing="0" cellpadding="0" width=100%>

<tr>

<td><address><small>

stm32w_flasher. <br>

2.1.0.

</small></address>

</td>

<td align="right">

<address><small>

Copyright &copy; 2011 by STMicrolectronics. All rights reserved.<br>

Generated Fri Sep 30 12:44:44 2011 with <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.6.1.

</small></address>

</td>

</tr>

</table>

</body>

</html>
